`version: '2'`
`services:`
  `zookeeper:`
    `image: confluentinc/cp-zookeeper:7.4.4`
    `environment:`
      `ZOOKEEPER_CLIENT_PORT: 2181`
      `ZOOKEEPER_TICK_TIME: 2000`
    `ports:`
      `- 22181:2181`
  
  `kafka:`
    `image: confluentinc/cp-kafka:7.4.4`
    `depends_on:`
      `- zookeeper`
    `ports:`
      `- 29092:29092`
    `environment:`
      `KAFKA_BROKER_ID: 1`
      `KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181`
      `KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092`
      `KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT`
      `KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT`
      `KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1`

  `zookeeper:` и   `kafka:` - контейнеры
  Вместе compos файл (манифест)

**Виртуализация**
	Технология, которая обеспечивает изоляцию вычислительных процессов, выполняемых на одном физическом устройстве и разделение системных ресурсов между этими процессами.
	Таким образом, можно запустить множество изолярованных друг от друга приложений (Каждому приложению выделялась свои часть системных ресурсов)
	**Два основных типа виртуализации:**
		- **Аппаратная**
			На сервер устанавливает **HOST**-операционная система (Гипервизор), которая умеет запускать несколько других **GUEST**-операционных систем (Виртуальных машин) и выделять для каждой из них свой набор системных ресурсов. ![[Pasted image 20240424112040.png]]
		- **На уровне операционной системы**
			Позволяет изолировать процессы и разделить ресурсы в рамках одной и той же ОС.
			Тем самым, обойдя основное ограничение аппаратной виртуализации.![[Pasted image 20240424112205.png]]


**Docker**
	Сервис для запуска приложений в контейнерах.
	Используется для более удобной разработки других приложений, их тестирования, доставку и запуск на различных платформах.
	Написан на Go.

- Возможно использовать как в процессе разработки, так и в продакшене (зачастую используется вместе с надстройкой Kubernetes).
- Позволяет отделить приложение от инфраструктуры, тем самым доставляя его **быстро** и **изолированно** от других приложений.

**Простым языком:** 
	*Docker* - взять приложение и запустить его в изолированном контейнере.

**Почему стоит использовать Docker:**
	- Приложения запускаются в изолированной среде.
	- Легко запускать приложения на разных серверах.
	- Все зависимости приложений устанавливаются внутри контейнеров.
	- Легко масштабировать путём увеличения кол-ва контейнеров.

Проблемы, которые решает Docker:
	- Два приложения хотят занять один сетевой порт.
	- Два приложения используют один и тот же файл, вследствие чего, одно из не может заблокировать его (file lock).
	- Два приложения хотят использовать две разные версии одной и той же глобальной библиотеки.
	- Одно приложение изменяет переменную окружения, которую использует другое приложение.
	- Два приложения конкурируют за одни и те же системные ресурсы (CPU, RAM, SSD).

**Контейнер** (Container)
	Самый маленький элемент в мире Docker.
	Приложения запускаются внутри контейнера.
	Обычно, одно приложение - один контейнер.
	Если в контейнере заканчиваются процессы, то Docker автоматически закрывает контейнер.
	После закрытия контейнера все его временные файлы на диске автоматически удаляются.

**Клиент** (Client)
	Запускается в командной строке.
	С помощью него можно подключаться к службе Docker.
	Служба может находиться на локальном сервере, или на удалённом.
	Зачастую клиент подключается к локальной службе, которая находится на том же компьютере, на котором находится клиент.

**Служба / Сервис** (Daemon)
	Отвечает за все задачи по созданию контейнеров и обработку запросов от клиентов.
	Т.е. Docker-сервер.

**Хост** (Host)
	Машина, на которой запущен Docker.

**Образ** (Image)
	Read-Only (только для чтения)
	Статичный набор файлов.
	Основа для создания контейнеров.
	С одного образа можно создать множество независимых друг от друга контейнеров.
	**Строение образа:**
		Образ состоит из слоёв, каждый слой является набором файлов.
		Позволяет хранить повторяющиеся слови разных контейнеров в одном месте в одном экземпляре, а не создавать каждый раз новый слой.

**Репозиторий** (Repository)
	В репозитории хранятся разные версии образов.
	Каждая версия имеет свои теги (нэйминги).
	

**Реестр** (Registry)
	В реестре находятся разные репозитории.
	Реестр может быть локальный или удалённый.
	**Docker Hub** - самый популярный удалённый реестр

